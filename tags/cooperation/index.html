<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    Cooperation // Hello World!!
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.15" />

  <meta property="og:title" content="Cooperation" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://alanmoment.github.io/tags/cooperation/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="http://alanmoment.github.io//css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="http://alanmoment.github.io/tags/cooperation/index.xml" rel="alternate" type="application/rss+xml" title="Hello World!!" />

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow-night-bright.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  
</head>

<body>
	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

	
	  <img src="/images/avatar.jpg" class="sidebarphoto">
	

    <h1 class="brand-title">Hello World!!</h1>
    <h2 class="brand-tagline">you can do anything you want to do.</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://alanmoment.github.io/">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/page/about/">About me</a></li>
        
      </ul>
    </nav>

    
    <div class="social-buttons">
      
        
        <a href="https://github.com/alanmoment" target="_blank"><i class='fa fa-github'></i></a>
        
      
        
        <a href="https://www.linkedin.com/in/alanmoment" target="_blank"><i class='fa fa-linkedin'></i></a>
        
      
        
        <a href="http://www.twitter.com/alanmoment" target="_blank"><i class='fa fa-twitter'></i></a>
        
      
      
    </div>
    

  </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
      <a name="top"></a>
      

      <div class="posts">
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/phabricator/phabricator-extensions-sprint_wu_fa_zhua_dao_zheng/">phabricator-extensions-Sprint 無法抓到正確的 Story Points</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>25</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Mar</span> <span class="post-date-year">2016</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>2 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2016" href="http://alanmoment.github.io//categories/2016">2016</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	在版號為 741e2ef4b1150f9a9e4b121218b3ea536289968d 之後的版本，因為 story points 變更欄位，所以 burndown chart 會沒辦法抓到正確的 point。 可以在官方這邊找到答案，但是並不是環境都一樣，所以必須要調整一下。 複製 copy_points.php 將檔案複製到 phabricator 目錄底下，如果你的資料庫名稱不是 phabricator_maniphest，那就要修改，第 106 行，如我就修改為 default_maniphest #!/usr/bin/env php &lt;?php // See &lt;https://secure.phabricator.com/T10350&gt; for discussion. require_once 'scripts/__init_script__.php'; $args = new PhutilArgumentParser($argv); $args-&gt;parseStandardArguments(); $args-&gt;parse( array( array( 'name' =&gt; 'field', 'param' =&gt; 'key', 'help' =&gt; pht('Field to migrate.'), ) )); $task = new ManiphestTask(); $fields = PhabricatorCustomField::getObjectFields( $task, PhabricatorCustomField::ROLE_EDIT); $field_map = $fields-&gt;getFields(); $field_list = implode(', ', array_keys($field_map)); if (!$field_map) { throw new PhutilArgumentUsageException( pht( 'You do not have any custom fields defined in Maniphest, so there is '.
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/phabricator/phabricator-extensions-sprint_wu_fa_zhua_dao_zheng/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/phabricator/phabricator_ji_ben_ying_yong/">Phabricator 基本應用</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>6</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2014</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>2 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2014" href="http://alanmoment.github.io//categories/2014">2014</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	Create Maniphest 在這可建立 Task 指派給某一個人，目前發現最大的功用是當在 review code 的時候可以讓 commit 加入某一個 task。 Create Herald Rule 在 Herald 的頁面 Create Herald Rule 建立一條新規則 Commits Commits 的規則是當 repositories 有提交程式碼的時候皆會通知 Differential Revisions Differential Revisions Maniphest Tasks Maniphest Tasks 的規則是當有建立或修改 task 皆會通知 規則隸屬 Personal 個人的規則 Object 版本庫的規則 Global 全域規則 設定規則 Personal Conditions When all of these conditions are met: Repository is any of test_repository 還在摸索中，所以就先通用只要是版本庫的 commit 都通知我 Action Take these actions every time this rule matches: Add me to CC : cc mail 通知我 Send me an email : mail 通知我 Mark with flag : 建立 flag，還可以選顏色 Trigger an Audit by me : 通知我 review code Do nothing : 什麼都不做 ** Maniphest Tasks** Conditions When all of these conditions are met: Assignee is any of alan task 則是設定指派給我的都通知我 Action Take these actions every time this rule matches: Assign task to me : 指派給我自己 只有這個規則比較不一樣。 Owners 若覺得要設定一堆規則很麻煩，有發現另外一個比較簡單的&hellip; 在 Owners 可以 Create Package 在這邊選擇 Repository 並設定 path。這樣當版本庫有異動的時候就都會通知。 Email 設定 在 Config 有兩個地方可以設定 email 一個是 Mail 另一個是 PHPMailer 就選擇比較簡單的設定即可，我自己設定兩個&hellip;結果好像會發兩封信&hellip; 郵件伺服器 phpmailer.mailer Configure mailer used by PHPMailer.
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/phabricator/phabricator_ji_ben_ying_yong/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/redmine/redminezhi_ji_ben_jian_zhi_yu_scrum_ying_yong/">Redmine之基本建置與Scrum應用</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>18</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Feb</span> <span class="post-date-year">2014</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2015" href="http://alanmoment.github.io//categories/2015">2015</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	工作上一直都有在應用 Redmine 今天嘗試自己建立，所以又開始在亂搞了! 其實是最近自己做一個專案，也想試著管理一次 Scrum。 在 RedmineInstall 有很詳細的安裝流程，安裝過程我也沒遇到甚麼困難的地方。所以在這邊就先略過了。 因為我自己建立的服務太多了，我習慣了 Apache 所以這次一樣是用 mod_proxy 的方式建立服務。 另外就是紀錄一套 Redmine 的 plugin。 Backlogs 對 Scrum 有不錯的支援。有興趣可以安裝看看。 整合 Git Repository Redmin 只能存取 local 端的 repository 所以沒辦法用 git@git.ocomm.com.tw 這種方式存取遠端。 $ mkdir /home/git/mirrors $ cd /home/git/mirrors $ git clone --mirror /home/git/mirrors/repo.git 設定權限給 git $ chown -R git:git repo.git $ cd repo.git 建立 post-receive $ vim post-receive #!/bin/sh /usr/bin/git push --mirror /home/git/mirrors/repo.git 改變 post-receive 權限 $ chown git:git post-receive
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/redmine/redminezhi_ji_ben_jian_zhi_yu_scrum_ying_yong/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/phabricator/phabricator_review_codeying_yong/">Phabricator review code應用</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>23</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jan</span> <span class="post-date-year">2014</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>4 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2014" href="http://alanmoment.github.io//categories/2014">2014</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	Review code 前置設定 在 Config &gt; Diffusion 設定 diffusion.ssh-port &quot;your ssh port&quot; diffusion.ssh-user &quot;your username&quot; 或是 command line 執行 $ cd /path/to/phabricator $ ./bin/config set diffusion.ssh-user &quot;your username&quot; 在 Config &gt; Daemon &gt; sphd.user 設定 phd.user &quot;your username&quot; 或是 command line 執行 $ ./bin/config set phd.user &quot;your username&quot; 要注意的就是 Config &gt; Conduit &gt; conduit.servers 是否有設定，我是預設留空的。 Create Repository 因為有新版的 Repository 設定，所以舊版的已經不適用，新版的設定中有更清楚的設置流程了。 按下 Create Repository 開始建立需要 Review 的版本庫。 Repository Type 選擇使用的版本控制系統。 Repository Name and Location 輸入人類看的懂的標題，以及版本控制 Callsign ，官網的範例是取專案第一個字母，必須要為大寫。譬如專案名字是 Test 那 Callsign 就是 T。 Policies 選擇可以控制這個版本庫的群組、會員。 Repository Ready!
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/phabricator/phabricator_review_codeying_yong/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/phabricator/install_phabricator_and_run_on_the_gitlab/">Install Phabricator and run on the Gitlab</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>14</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Sep</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>3 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	最近跑的專案都是四個人以上同時開發，有時候程式碼被改了，Pull下來改完衝突，發現程式碼都會錯亂。排除每個人對Git熟練度，我覺得Gitlab對於Review code做的似乎不是很友善。Scrum在跑的時候碰到這類型的問題，每次要解決都要花不少時間。 在某一次尋找Git相關教學的時候發現了一個蠻冷門的東西Phabricator，當初看到這套的時候第一印象就覺得這也是版本控制，所以加入最愛後就沒再理他，當碰到最近的問題，才想到我似乎在哪裡有看到這種問題的Solution。 這一套Phabricator是Facebook釋出的Open source，Facebook也是為了解決Review Code, Track Bugs, Browse Source&hellip;等等這些問題才會開發這一套系統。 開始安裝 在官網是很詳細的安裝方式我在這邊粗略的介紹一下。 要使用Phabricator一定得先安裝git, apache, mysql, php, php extensions (mbstring, iconv&hellip;等) git (usually called &ldquo;git&rdquo; in package management systems) Apache (usually &ldquo;httpd&rdquo; or &ldquo;apache2&rdquo;) (or nginx) MySQL Server (usually &ldquo;mysqld&rdquo; or &ldquo;mysql-server&rdquo;) PHP (usually &ldquo;php&rdquo;) Required PHP extensions: mbstring, iconv, mysql (or mysqli), curl, pcntl (these might be something like &ldquo;php-mysql&rdquo; or &ldquo;php5-mysql&rdquo;) Optional PHP extensions: gd, apc (special instructions for APC are available below if you have difficulty installing it), xhprof (instructions below, you only need this if you are developing Phabricator) 他還有些版本的限制，必需要注意。安裝以上是比較基本的，接下來就是clone。 $ cd somewhere/ # pick some install directory somewhere/ $ git clone git://github.com/facebook/libphutil.git somewhere/ $ git clone git://github.com/facebook/arcanist.git somewhere/ $ git clone git://github.com/facebook/phabricator.git clone下來最好就在libphutil、arcanist、phabricator先執行git pull因為我沒有這樣做，多花了一個小時找問題阿&hellip;結果根本就不是最新的版本。 另外可以選擇是不是要安裝APC、XHProf 修改httpd-vhosts.conf 我的東西大部份都是部屬在Apache上這個也不例外。所以我加上sub domain相關的參數。 $ vim /etc/httpd/conf.d/httpd-vhosts.conf &lt;virtualhost&gt; # Change this to the domain which points to your host.
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/phabricator/install_phabricator_and_run_on_the_gitlab/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/gitlab/gitlab_41_upgrade_to_gitlab_60chao_tou_lan_fang_fa/">Gitlab 4.1 upgrade to Gitlab 6.0超偷懶方法</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>6</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Sep</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	Gitlab官方網站已經釋出Gitlab 6.0了，我的版本卻還在4.1。所以忍不住手癢，試試看4.1升級到6.0，但是這中間的版本實在太多啦。要一個一個升級，不知道又會遇到什麼問題。所幸愛亂搞的我，想到了妙招，如果我重新安裝6.0但是使用的是原本的4.1資料表，是不是也可以正常運作呢? 因為Gitlab的migrate應該是不會影響到以前的資料。 備份以下東西，以防止不能運作後，還能回復成4.1的版本 Mysql中的gitlabhq_production資料庫 /etc/init.d/gitlab 再來就先停止Gitlab的運行 $ service gitlab stop 然後依照官網的安裝步驟。但只執行到bundle install。因為要使用到原本的資料庫。 bundle install --deployment --without development test postgres aws 再來依照官網5.4升級到6.0的文件，執行下列程序。 sudo -u git -H bundle exec rake db:migrate RAILS_ENV=production sudo -u git -H bundle exec rake migrate_groups RAILS_ENV=production sudo -u git -H bundle exec rake migrate_global_projects RAILS_ENV=production sudo -u git -H bundle exec rake migrate_keys RAILS_ENV=production sudo -u git -H bundle exec rake migrate_inline_notes RAILS_ENV=production sudo -u git -H bundle exec rake gitlab:satellites:create RAILS_ENV=production # Clear redis cache sudo -u git -H bundle exec rake cache:clear RAILS_ENV=production # Clear and precompile assets sudo -u git -H bundle exec rake assets:clean RAILS_ENV=production sudo -u git -H bundle exec rake assets:precompile RAILS_ENV=production 取得啟動腳本 curl --output /etc/init.d/gitlab https://raw.github.com/gitlabhq/gitlab-recipes/master/init.d/gitlab chkconfig --add gitlab chkconfig gitlab on chmod +x /etc/init.d/gitlab 因為我的gitlab是掛在apache上的所以還要修改httpd-vhosts.conf $ vim /etc/httpd/conf.d/httpd-vhosts.conf &lt;virtualhost&gt; ServerName git.ocomm.com.tw DocumentRoot /home/git/gitlab/public # !!!
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/gitlab/gitlab_41_upgrade_to_gitlab_60chao_tou_lan_fang_fa/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/gitlab/jian_zhi_zhuan_shu_zi_ji_de_github_zhi_gitlab/">建置專屬自己的Github之Gitlab</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>28</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>2 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	Github用久了就覺得這一切真是太方便了!!但是呢，有些程式碼就是不太方便放在別人那邊，不管自己寫的code是不是有到那種程度，人就是想把屬於自己的東西留給自己欣賞，這個時候Gitlab就是你的救星啦!!! 安裝Rvm Ruby $ curl -L https://get.rvm.io | bash -s stable --ruby $ rvm install 1.9.3 $ rvm use 1.9.3 $ rvm rubygems latest 下載並安裝git-core $ cd /tmp $ wget 'https://git-core.googlecode.com/files/git-1.7.11.tar.gz' $ tar zxvf git-1.7.11.tar.gz $ cd git-1.7.11 $ ./configure $ make $ make install 安裝Gitlab所需套件 $ yum install openssl openssl-devel zlib zlib-devel mysql mysql-devel sqlite sqlite-devel libicu-devel $ wget 'http://peak.telecommunity.com/dist/ez_setup.py' $ python ez_setup.py $ easy_install pip $ pip install pygments 安裝Redis 我自己覺得Redis有點像Memcache，底層的實作我就不太清楚。 $ wget 'http://redis.googlecode.com/files/redis-2.4.15.tar.gz' $ tar xzf redis-2.4.5.tar.gz $ cd redis-2.4.5 $ make $ make install $ cd utils $ ./install_server.sh $ mkdir /etc/redis /var/lib/redis $ cp src/redis-server src/redis-cli /usr/local/bin/ $ cp redis.conf /etc/redis/ 將設定值修改如下： $ vim /etc/redis/redis.conf daemonize yes bind 127.0.0.1 /home/git/.profile' $ sudo -u git -i -H /home/git/gitolite/src/gl-system-install $ cp /home/gitlab/.ssh/id_rsa.pub /home/git/gitlab.pub $ chmod 777 /home/git/gitlab.pub $ sudo -u git -H sed -i 's/0077/0007/g' /home/git/share/gitolite/conf/example.gitolite.rc $ sudo -u git -H sh -c &quot;PATH=/home/git/bin:$PATH; gl-setup -q /home/git/gitlab.pub&quot; 修改資料夾權限及擁有者 $ chmod -R g+rwX /home/git/repositories/ $ chown -R git:git /home/git/repositories/ 測試Gitlab是否可以正常下載Gitolite管理檔案庫 $ su - gitlab $ git clone git@localhost:gitolite-admin.git /tmp/gitolite-admin $ rm -rf /tmp/gitolite-admin $ exit 設定Gitlab $ gem install charlock_holmes $ gem install bundler $ bundle install $ su - gitlab $ git clone http://github.com/gitlabhq/gitlabhq.git gitlab $ cd gitlab 使用MySQL，複製設定檔，修改資料庫登入帳號及密碼 $ cp config/database.yml.mysql config/database.yml 修改gitlab.yml $ cp config/gitlab.yml.example config/gitlab.yml $ vim config/gitlab.yml ## GitLab settings gitlab: ## Web server settings #host: localhost host: git.ocomm.com.tw 這個步驟當時搞好久，結果是要自己先建立資料庫...
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/gitlab/jian_zhi_zhuan_shu_zi_ji_de_github_zhi_gitlab/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
      </div>

      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>

	<p>&copy; 2016. All rights reserved.</p>
</div>
    </div>
  </div>
  
</body>
</html>
