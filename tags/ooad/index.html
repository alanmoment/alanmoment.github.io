<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" Ooad &middot;  Hello World!!" />
  	<meta property="og:site_name" content="Hello World!!" />
  	<meta property="og:url" content="http://localhost:1313/tags/ooad/" />

    
    <meta property="og:type" content="website" />
    

  <title>
     Ooad &middot;  Hello World!!
  </title>

    <meta name="description" content="you can do anything you want to do." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="http://localhost:1313/images/favicon.ico">
	  <link rel="apple-touch-icon" href="http://localhost:1313/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="http://localhost:1313/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="http://localhost:1313/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="http://localhost:1313/index.xml" rel="alternate" type="application/rss+xml" title="Hello World!!" />
      
      
        <link href="http://localhost:1313/tags/ooad/index.xml" rel="alternate" type="application/rss+xml" title="Ooad &middot; Hello World!!" />
      
    
    <meta name="generator" content="Hugo 0.15" />

    <link rel="canonical" href="http://localhost:1313/tags/ooad/" />

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://localhost:1313/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="http://localhost:1313/page/about/">About me</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="http://localhost:1313/tags/ooad/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




	<header class="main-header tag-head" style="background-image: url(http://localhost:1313//images/517273.jpg)">

    <nav class="main-nav overlay clearfix">
      
        <a class="blog-logo" href="http://localhost:1313/"><img src="http://localhost:1313//images/Iron_man.jpg" alt="Home" /></a>
      
      
          <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
      
    </nav>
    <div class="vertical">
        <div class="main-header-content inner">
            <h1 class="page-title">Ooad</h1>
            <h2 class="page-description">
                
            </h2>
        </div>
    </div>
</header>

<main class="content" role="main">
    

	<div class="extra-pagination inner">
    <nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 of 1</span>
	
</nav>

	</div>

	
	   
<article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="http://localhost:1313/post/ooad/injection_principle_design_pattern/">Injection Principle Design Pattern</a></h2>
    </header>
    <section class="post-excerpt">
        <p>這兩天有個案例，內容簡約來說可以這樣闡述： A客戶要簽約買限額的N種廣告，要提供API介接 所以我開始分解上面這段話做設計。 這次A客戶簽約，下次也有機會與B客戶簽約。 廣告有 Header, Body, Footer, Left 及 Right 共5個區域可以放產品，A客戶要買 Header, Body 以及 Right 三種，當然下次別人也有機會買 Footer 或是 Left。 A客戶各買 100個, 100個 和 250個產品限額的廣告方案，當然別的客戶也有可能更多亦或更少。 A客戶使用的介接格式是 XML，當然也有機會用到 Json 或其他種類的資料格式，輸出也是相同。 若是不考慮 Design Pattern 其實這樣子的介接不難做，但要思考的是，假使不做適當的邏輯分離與切割，造成高耦合度，那擴充與修改是否會造成災難。所以我一直覺得寫程式人人都會，但是寫的一手好程式可就不簡單了。而我一直朝著這個目標邁進。 當分析需求完畢，我就開始發想，有哪種設計模式或原則適合這種狀況，應該要避免太複雜的設計模式造成開發困難或結構複雜化。小弟不才，懂得不多。我想到用 Injection Principle 這個原則來做。 介接資料 與A客戶協議好用XML資料格式介接，如之前提到的，介接的資料格式是有機會異動的，所以我覺得解析與回傳資料是應該要被分離的。 只要是介接都必須要有解析與回傳，所以我定義介接資料用的介面，裡面必須要實作解析與輸出這兩件事。 /** * 解析、回傳介接資料介面 */ interface ApiAdParseInterface { /** * 任何解析廣告的資料都必須實作 * @param type $content */ public function parse($content); /** * 任何回傳廣告的介接結果都必須實作 * @param type $content */ public function generate($content); } 我想到日後或許A客戶也有機會異動介接資料的格式，所以我選擇用DI處理，制訂出配置器加強彈性。 這個配置器主要提供注入的方法，今天若是要實作XML的資料格式，那就在建立這個實體的時候提供 instance。 /** * 解析、回傳介接結果配置器 */ class ApiParseAdAdapter { private $adapter; public function ApiParseAdAdapter($adapter) { $this-&gt;adapter = $adapter; } /** * 解析輸入的資料 * @param type $content */ public function parse($content) { return $this-&gt;adapter-&gt;parse($content); } /** * 輸出要產生的資料格式 * @param type $content */ public function generate($content) { return $this-&gt;adapter-&gt;generate($content); } } 實作以 XML 格式介接新增廣告 /** * 實作解析、生成新增廣告xml資料 */ class ParseAddAdXml implements ApiAdParseInterface { public function parse($xml) { ... <a class="read-more" href="http://localhost:1313/post/ooad/injection_principle_design_pattern/">&raquo;</a></p>
    </section>
    <footer class="post-meta">
        
        
            <img class="author-thumb" src="http://localhost:1313//images/Iron_man.jpg" alt="Author image" nopin="nopin" />
        
        
            Alan
        
        on
            
                <a href="http://localhost:1313/tags/ooad/">#ooad</a>,
            
        
        <time class="post-date" datetime="2014-02-26T21:33:00Z">
            26 Feb 2014
        </time>
    </footer>
</article>

	

	<nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 of 1</span>
	
</nav>

</main>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Hello World!!</a> &copy; Copyright Alan - 2016</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="http://localhost:1313/js/jquery.js"></script>
    <script type="text/javascript" src="http://localhost:1313/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="http://localhost:1313/js/index.js"></script>
    
</body>
</html>
