<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    2013 // Hello World!!
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="generator" content="Hugo 0.15" />

  <meta property="og:title" content="2013" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="http://alanmoment.github.io/categories/2013/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="http://alanmoment.github.io//css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="http://alanmoment.github.io/categories/2013/index.xml" rel="alternate" type="application/rss+xml" title="Hello World!!" />

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow-night-bright.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  
</head>

<body>
	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

	
	  <img src="/images/avatar.jpg" class="sidebarphoto">
	

    <h1 class="brand-title">Hello World!!</h1>
    <h2 class="brand-tagline">you can do anything you want to do.</h2>

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="http://alanmoment.github.io/">Home</a></li>
        
          <li class="nav-item"><span class="nav-item-separator">//</span><a href="/page/about/">About me</a></li>
        
      </ul>
    </nav>

    
    <div class="social-buttons">
      
        
        <a href="https://github.com/alanmoment" target="_blank"><i class='fa fa-github'></i></a>
        
      
        
        <a href="https://www.linkedin.com/in/alanmoment" target="_blank"><i class='fa fa-linkedin'></i></a>
        
      
        
        <a href="http://www.twitter.com/alanmoment" target="_blank"><i class='fa fa-twitter'></i></a>
        
      
      
    </div>
    

  </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4">
      <a name="top"></a>
      

      <div class="posts">
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/php/gearman_job_worker_for_php/">Gearman Job Worker for PHP</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>22</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Dec</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	最近同事接觸到需要 worker 來處理一些非同步的事情。諸如訂單、寄發email都常用非同步來執行，以往這些事情大多都用排程解決，其實還有更好的 solution。他們使用 Gearman 來解決這個問題。好奇心的驅使，就算不是我實作的我也想去玩玩看新的東西，Gearman 可以在系統裡起一個 Job Worker 也可以算是 service，這個 job worker 可以在不起一個排程的情況底下，幫你寄信、處理訂單。也就是當你有需要使用 email 在呼叫他就好了。 安裝 Gearman 在 CentOS 中可以直接用 yum 安裝 $ yum install -y gearmand 安裝 Gearman 依賴包 $ yum -y install re2c geoip geoip-data geoip-devel gcc* boost* libgearman* 這兩個步驟都很簡單 安裝 PHP 的 Gearman extension $ wget http://pecl.php.net/get/gearman-1.1.1.tgz $ cd gearman-1.1.1 $ phpize $ ./configure $ make &amp;&amp; make install 最後在 php.ini 加上 module $ vim /etc/php.ini
            </article>
			<div class="read-more-link">
				<a href="/post/php/gearman_job_worker_for_php/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/android/android_universal_image_loader/">Android Universal Image Loader</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>28</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Nov</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>2 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	開發了一陣子的Android，一開始著墨在功能是否能正常運作，現在注重的地方在校能，因為常發生閃退，或未知的錯誤，這邊要講一下下載遠端的圖片加強版。 繼上次發表AsyncTask Download Image by the Android，這一篇發現了其中有些問題。若是大量的圖片，會產生大量的AsyncTask，會造成閃退，以及其他的AsyncTask無法運作，所以有個工具是Android-Universal-Image-Loader，它已經幫使用者處理這部份的問題了，使用起來也很簡單。也不會有AsyncTask阻塞的問題。 Gradle 有兩種方式載入jar檔 官網下載jar檔放進libs，在build.gradle的dependencies中建立compile files('libs/universal-image-loader-1.8.6.jar') 自動下載，在build.gradle的dependencies中建立 compile 'com.nostra13.universalimageloader:universal-image-loader:1.8.6' Usage 我自己寫一隻方便使用的Base /** * ImageLoader Base * * @author Alan * @since 2013/09/06 */ public class BaseImageLoader { private static ImageLoader imageLoader; private static DisplayImageOptions options; private String path = &quot;loader_cache&quot;; private int stubImage = R.drawable.default; private int emptyImage = R.drawable.default; private int failImage = R.drawable.default; private int fadeInTimestamp = 500; public BaseImageLoader(Context context) { File
            </article>
			<div class="read-more-link">
				<a href="/post/android/android_universal_image_loader/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/android/use_thread_control_android_ui/">Use Thread control Android UI</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>11</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Nov</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	在開發Android app若要用Thread改變UI的話會遇到這個Exception android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4637) at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:876) at android.view.ViewGroup.invalidateChild(ViewGroup.java:4174) at android.view.View.invalidate(View.java:10313) 原因是Android不允許onCreate之後再建立Thread改變UI，所以得透過他提供的方法 // run on ui thread runOnUiThread(new Runnable() { public void run() { // TODO } }); 這樣就可以透過Thread來執行改變UI的事件了。 完整的範例如下，透過Thread 5秒後改變某個UI的屬性 // Start thread @Override protected void onResume() { super.onResume(); myThread.start(); } // Stop thread @Override public void onPause() { super.onPause(); myThread.interrupt(); } // Execute thread after 5s.
            </article>
			<div class="read-more-link">
				<a href="/post/android/use_thread_control_android_ui/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/other/zou_zai_shi_shang_de_jian_7aef21_ghost/">走在時尚的尖端! Ghost</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>24</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Oct</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	今天我也要來趕流行一下，最近很流行Ghost這東東，這東東是甚麼呢？他有點像Octopress，但是卻不像Octopress比較困難架。 Ghost是架構在Nodejs上的，可以用極短..極短..極短的時間架好blog。一分鐘就可以架好了！！就是這麼簡單，所以也沒有甚麼流程，只要安裝Nodejs基本上就完成了。 Ghost允許線上用Markdown編輯文章，不像Octopress得依靠Command line或工具。 Install Nodejs 可以按照官網上的Install Node步驟安裝，或是CentOS 安装 Node.js 0.8.5也可以看一下。 Install Ghost 註冊Ghost就可以到Download畫面下載。 接著五個步驟就完成了。 $ wget 'https://en.ghost.org/zip/ghost-0.3.2.zip' $ unzip ghost-0.3.2.zip -d ghost $ cd ghost $ npm install --production $ npm start 這樣就可以run囉!!簡單到炸掉阿&hellip; 畫面非常乾淨漂亮。 後台管理 輸入網址http://your-domain/ghost就可以註冊一個admin的帳號。 設定config.js 網站目錄底下有個config.js，若沒有則自己複製一份。 $ cp -a config.example.js config.js 這邊將全部的my-ghost-blog.com替換成自己的domain。 PM2管理Ghost 若是使用npm start啟動，會有點難管理，而且nodejs最為人詬病的就是不friendly。所以這邊我是使用PM2。Github上有很詳細的安裝方式，就不再說明。應用在Ghost則可以執行。 $ pm2 start ghost/index.js 看執行中的程式 $ pm2 list 看程式負載 $ pm2 monit 也可以看log $ pm2 logs
            </article>
			<div class="read-more-link">
				<a href="/post/other/zou_zai_shi_shang_de_jian_7aef21_ghost/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/android/asynctask_download_image_by_the_android/">AsyncTask download image by the Android</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>18</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Oct</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>2 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	開發Android時常需要呈現圖片，但不可能圖片都是從Drawable中撈出來，一定有時需要從ImageServer或是透過網址取得圖片。 若是用一般的方式解決 try { URL url = new URL(imageUrl); HttpURLConnection connection = (HttpURLConnection) url.openConnection(); connection.setDoInput(true); connection.connect(); InputStream input = connection.getInputStream(); Bitmap bitmap = BitmapFactory.decodeStrea (input); return bitmap; } catch (IOException e) { e.printStackTrace(); return null; } 這樣子會造成讀取完圖片才會往下繼續執行的窘境，如果Timeout那畫面會停留更久。所以要用AsyncTask的特性來實作這個功能。 Android 4.0之後為了避免跟網路溝通時造成畫面停滯的問題，在與網路溝通的程式碼中必須要用執行緒的方式來進行與網路的溝通。 建立ImageDownloadTask 先在AndroidManifest.xml開啟網路權限 &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;&gt;&lt;/uses-permission&gt; 為了避免在短時間內下載重複的圖片，所以用url當作key做了cache的機制imageCache.put(params[0], mIcon11)，只要cache中不超過空間限制，都不會重複向遠端撈取圖片。 package com.example.test; import android.graphics.Bitmap; import android.graphics.BitmapFactory; import android.os.AsyncTask; import android.support.v4.util.LruCache; import android.util.Log; import android.widget.ImageView; import java.io.InputStream; import java.net.URLConnection; /** * 遠端下載圖片 * * @author Alan * @since 2013/10/05 */ public class ImageDownloadTask extends AsyncTask&lt;string void bitmap&gt; { private static final String LOG_TAG = ImageDownloadTask.class.getName(); private ImageView bmImage; private static LruCache imageCache; private static final int CACHE_SIZE = 1; //1MB public ImageDownloadTask(ImageView bmImage) { this.bmImage = bmImage; // 設定圖片快取 if (imageCache == null) { imageCache = new LruCache(CACHE_SIZE * 1024 * 1024); } } protected Bitmap doInBackground(String...
            </article>
			<div class="read-more-link">
				<a href="/post/android/asynctask_download_image_by_the_android/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/android/progressbar_while_loading_listview_of_android/">ProgressBar while loading ListView of Android</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>11</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Oct</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>2 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	ListView通常是用來顯示列表的Widget，但是一般不可能直接從不管是遠端的Database或是Sqlite撈出全部的資料然後直接顯示，一定是分批撈取分批顯示。 這時就需要一個Loading畫面讓Client知道說，當前正在載入資料。不管是跳Dialog或是像Facebook一樣在畫面Bottom顯示Loading layout都可以。 我採取的是像Facebook一樣的方式呈現。 建立MainActivity.java simpleAdapter可另外設置R.layout.listview_item讓ListView中的資料吃別隻xml。 package com.example.test; import android.app.Activity; import android.content.Context; import android.os.Bundle; import android.util.Log; import android.view.Gravity; import android.widget.AbsListView; import android.widget.LinearLayout; import android.widget.ListView; import android.widget.ProgressBar; import android.widget.SimpleAdapter; import android.widget.TextView; import java.util.ArrayList; import java.util.HashMap; import java.util.List; import java.util.Map; public class MainActivity extends Activity { private String TAG_LOG = MainActivity.class.getName(); // ViewList需要用到的制定鍵值 String[] adapterKey; // ViewList需要用到的制定鍵值 int[] adapterViewKey; // 顯示讀取畫面的容器 LinearLayout loadingLayout; // 顯示列表的容器 ListView listView; // 列表 SimpleAdapter simpleAdapter; //
            </article>
			<div class="read-more-link">
				<a href="/post/android/progressbar_while_loading_listview_of_android/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/ide/yong_netbeans_kai_fa_ruby_on_rails/">用NetBeans開發Ruby On Rails</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>4</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Oct</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	NetBeans除了能開發PHP、Java、..等等的這些程式語言，其實也早就有Plugin能支援開發Ruby哦。 下載RailsInstaller RailsInstaller有完整的開發環境。一包就搞定。 下載Ruby and Rails Plugin 從官網的Plugins下載完畢後從NetBeans的功能選項中選擇 Tools→Plugins 在安裝其他的plugins之前，必須先選擇安裝org-jruby-jruby.jar，讓NetBeans可以支援Ruby 再來安裝其他的plugins就不會出現錯誤訊息 全部安裝完畢後，就可以在功能選項中建立Ruby On Rails的Application囉。 File→New Project 雖然我使用NetBeans已經很長一段時間了，但是主要用他來開發PHP，開發PHP是很好用沒錯。要用他來開發RoR是有點勉強阿&hellip; 所以其實我裝完之後就沒再使用了，我個人比較推薦Aptana Studio，畫面看起來也比較舒服。 發生錯誤 6/23/2013 4:57:01 PM 建立project之後執行run，發現console有錯誤訊息如下 WARN Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 在C:\RailsInstaller\Ruby1.9.3\lib\ruby\1.9.1\webrick\httpresponse.rb搜尋 if chunked? || @header['content-length'] 替換為 if chunked? || @header['content-length'] || @status == 304 || @status == 204 即可解決 參考：http://richardjoo.wordpress.com/2013/01/15/warn-could-not-determine-content-length-of-response-body-set-content-length-of-the-response-or-set-responsechunked-true/ 6/23/2013 11:57:01 PM 當更改固定首頁的時候出現錯誤訊息如下 ExecJS::RuntimeError in Home#index 可以到C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems\execjs-1.4.0\lib\execjs\runtimes.rb搜尋cscript
            </article>
			<div class="read-more-link">
				<a href="/post/ide/yong_netbeans_kai_fa_ruby_on_rails/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/android/android_use_foreign_object_of_ormlite/">Android use foreign object of OrmLite</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>1</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Oct</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	Android也有很好用的ActiveRecord可以應用，OrmLite提供了非常多的函式方便應用，架構也非常清楚，在跟SqlLite溝通時不再需要自己造輪子。 這邊記錄當ValueObject有繼承關係，又必須要有主附表關係時OrmLite的Foreign Key應用方法。 建立Major 類似像MySql的主附表應用，主表如下，@DatabaseTable是用在若要另外建立表名，則必須要設定這個值，若沒設定預設會用class的名字建立。 @DatabaseField則是欄位名稱。 package com.data; import com.j256.ormlite.field.DatabaseField; import com.j256.ormlite.table.DatabaseTable; /** * Created by Alan on 2013/9/18. */ @DatabaseTable(tableName=&quot;Major&quot;) public class Major { @DatabaseField private String parent; public void setParent(String parent) { this.parent = parent; } public String getParent() { return this.parent; } } 建立Minor 當Minor與Major是繼承關係時，同時又必須要包含另外的物件。這邊的@DatabaseField在參數中有foreign代表著這個屬性是外部鍵，指向另外一個物件的主鍵。並且foreignAutoRefresh是新增一筆資料後不用另外refresh。 package com.data; import com.j256.ormlite.field.DatabaseField; import com.j256.ormlite.table.DatabaseTable; /** * Created by Alan on 2013/9/18. */ @DatabaseTable(tableName = &quot;Minor&quot;) public class Minor extends Major { @DatabaseField(foreign=true, foreignAutoRefresh=true) private Other other; public Minor() { } @DatabaseField private String child; public void setChild(String child) { this.child = child; } public String getChild() { return this.child; } /** * 設定外部物件 */ public void setOther(Other other) { this.other = other; } /** * 取得外部物件 */ public Other getOther() { return this.other; } } 建立外部物件 外部物件若要和別的物件有Composition的關係，在這邊必須要有主鍵，而我設定generatedId=true就類似MySql的auto_increment屬性，讓物件可以自動生成ID，以便和別的物件建立指向關係。 package com.data; import com.j256.ormlite.field.DatabaseField; import com.j256.ormlite.table.DatabaseTable; /** * Created by Alan on 2013/9/18.
            </article>
			<div class="read-more-link">
				<a href="/post/android/android_use_foreign_object_of_ormlite/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/phabricator/install_phabricator_and_run_on_the_gitlab/">Install Phabricator and run on the Gitlab</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>14</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Sep</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>3 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	最近跑的專案都是四個人以上同時開發，有時候程式碼被改了，Pull下來改完衝突，發現程式碼都會錯亂。排除每個人對Git熟練度，我覺得Gitlab對於Review code做的似乎不是很友善。Scrum在跑的時候碰到這類型的問題，每次要解決都要花不少時間。 在某一次尋找Git相關教學的時候發現了一個蠻冷門的東西Phabricator，當初看到這套的時候第一印象就覺得這也是版本控制，所以加入最愛後就沒再理他，當碰到最近的問題，才想到我似乎在哪裡有看到這種問題的Solution。 這一套Phabricator是Facebook釋出的Open source，Facebook也是為了解決Review Code, Track Bugs, Browse Source&hellip;等等這些問題才會開發這一套系統。 開始安裝 在官網是很詳細的安裝方式我在這邊粗略的介紹一下。 要使用Phabricator一定得先安裝git, apache, mysql, php, php extensions (mbstring, iconv&hellip;等) git (usually called &ldquo;git&rdquo; in package management systems) Apache (usually &ldquo;httpd&rdquo; or &ldquo;apache2&rdquo;) (or nginx) MySQL Server (usually &ldquo;mysqld&rdquo; or &ldquo;mysql-server&rdquo;) PHP (usually &ldquo;php&rdquo;) Required PHP extensions: mbstring, iconv, mysql (or mysqli), curl, pcntl (these might be something like &ldquo;php-mysql&rdquo; or &ldquo;php5-mysql&rdquo;) Optional PHP extensions: gd, apc (special instructions for APC are available below if you have difficulty installing it), xhprof (instructions below, you only need this if you are developing Phabricator) 他還有些版本的限制，必需要注意。安裝以上是比較基本的，接下來就是clone。 $ cd somewhere/ # pick some install directory somewhere/ $ git clone git://github.com/facebook/libphutil.git somewhere/ $ git clone git://github.com/facebook/arcanist.git somewhere/ $ git clone git://github.com/facebook/phabricator.git clone下來最好就在libphutil、arcanist、phabricator先執行git pull因為我沒有這樣做，多花了一個小時找問題阿&hellip;結果根本就不是最新的版本。 另外可以選擇是不是要安裝APC、XHProf 修改httpd-vhosts.conf 我的東西大部份都是部屬在Apache上這個也不例外。所以我加上sub domain相關的參數。 $ vim /etc/httpd/conf.d/httpd-vhosts.conf &lt;virtualhost&gt; # Change this to the domain which points to your host.
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/phabricator/install_phabricator_and_run_on_the_gitlab/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/gitlab/gitlab_41_upgrade_to_gitlab_60chao_tou_lan_fang_fa/">Gitlab 4.1 upgrade to Gitlab 6.0超偷懶方法</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>6</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Sep</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	Gitlab官方網站已經釋出Gitlab 6.0了，我的版本卻還在4.1。所以忍不住手癢，試試看4.1升級到6.0，但是這中間的版本實在太多啦。要一個一個升級，不知道又會遇到什麼問題。所幸愛亂搞的我，想到了妙招，如果我重新安裝6.0但是使用的是原本的4.1資料表，是不是也可以正常運作呢? 因為Gitlab的migrate應該是不會影響到以前的資料。 備份以下東西，以防止不能運作後，還能回復成4.1的版本 Mysql中的gitlabhq_production資料庫 /etc/init.d/gitlab 再來就先停止Gitlab的運行 $ service gitlab stop 然後依照官網的安裝步驟。但只執行到bundle install。因為要使用到原本的資料庫。 bundle install --deployment --without development test postgres aws 再來依照官網5.4升級到6.0的文件，執行下列程序。 sudo -u git -H bundle exec rake db:migrate RAILS_ENV=production sudo -u git -H bundle exec rake migrate_groups RAILS_ENV=production sudo -u git -H bundle exec rake migrate_global_projects RAILS_ENV=production sudo -u git -H bundle exec rake migrate_keys RAILS_ENV=production sudo -u git -H bundle exec rake migrate_inline_notes RAILS_ENV=production sudo -u git -H bundle exec rake gitlab:satellites:create RAILS_ENV=production # Clear redis cache sudo -u git -H bundle exec rake cache:clear RAILS_ENV=production # Clear and precompile assets sudo -u git -H bundle exec rake assets:clean RAILS_ENV=production sudo -u git -H bundle exec rake assets:precompile RAILS_ENV=production 取得啟動腳本 curl --output /etc/init.d/gitlab https://raw.github.com/gitlabhq/gitlab-recipes/master/init.d/gitlab chkconfig --add gitlab chkconfig gitlab on chmod +x /etc/init.d/gitlab 因為我的gitlab是掛在apache上的所以還要修改httpd-vhosts.conf $ vim /etc/httpd/conf.d/httpd-vhosts.conf &lt;virtualhost&gt; ServerName git.ocomm.com.tw DocumentRoot /home/git/gitlab/public # !!!
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/gitlab/gitlab_41_upgrade_to_gitlab_60chao_tou_lan_fang_fa/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/android/android_zipcode_library_of_maven/">Android zipcode library of maven</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>3</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Sep</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	最近在做Android app時需要用到縣市、區域這些資料，做過網站的，都知道處理這個很煩啊!所以大多都會抽出來另外處理，封裝成Component好方便使用，但是在Android上要是把縣市、區域、郵遞區號放到strings.xml裡面，我想是會瘋掉的，維護、擴充也不容易。我就是建完才後悔的&hellip; 有個不錯的方法就是將資料用json的格式存成一隻檔案，然後自己寫抓取json的util放到Android的libs，這樣要使用就很方便了。 Eclipse安裝Maven 使用Eclipse plugin安裝Maven，在Install new software中點選Add輸入下列資料。 Name：Maven Plugin Location：http://download.eclipse.org/technology/m2e/releases 若是發生不能安裝的錯誤還有另外一個 Name：Indigo Location：http://download.eclipse.org/releases/indigo 在這個套件裡尋找Maven並且安裝 安裝Maven工具 Maven官網下載Maven 3.1.0 (Binary tar.gz)，放哪裡都可以但是建議不要放在含有空白或特殊字元的資料夾，最後要在環境變數加上以下變數。 變數名稱：MAVEN_HOME 變數值：C:\你的目錄\apache-maven-3.1.0 在Path變數尾端加上MAVEN_HOME %MAVEN_HOME%\bin; 建立Maven project 為了方便自己管理library所以我建立了maven project Step 1. Step 2. Step 3. 修改pom.xml 因為要解析json格式，所以在這邊需要引入google-gson的dependency，為什麼不用json-simple呢，因為Android並沒有支援這個library。 在&gt;標籤中加入 &lt;dependency&gt;&lt;groupid&gt;com.google.code.gson&lt;/groupid&gt;&lt;artifactid&gt;gson&lt;/artifactid&gt;&lt;version&gt;2.2.4&lt;/version&gt;&lt;/dependency&gt; 在project中Maven Dependencies就會增加gson library 建立zipcode.json 依照下圖的格式建立zipcode.json 將zipcode.json放置在src/main/resources，並且修改pom.xml，這樣在使用maven install就能夾帶檔案。 在&gt;標籤中加入 &lt;build&gt;&lt;resources&gt;&lt;resource&gt;&lt;directory&gt;src/main/resources&lt;/directory&gt;&lt;includes&gt;&lt;include&gt;zipcode.json&lt;/include&gt;&lt;/includes&gt;&lt;/resource&gt;&lt;/resources&gt;&lt;/build&gt; 建立Zipcode Library 建立InputStreamReader讀取json資料，再用gson解析讀取完畢再關掉。 因為gson會主動幫字串加上雙引號，所以取資料出來必須要用getAsString()，不能用toString()，否則雙引號不會濾掉。 package com.zipcode_util; import java.io.BufferedReader; import java.io.IOException; import java.io.InputStreamReader; import com.google.gson.Gson; import com.google.gson.JsonArray; import com.google.gson.JsonObject; public class ZipcodeComponent { private static final String ZIPCODE_FILE = &quot;zipcode.json&quot;; private static JsonObject jsonObject; /** * Json file io * @return JsonObject jsonObject */ private JsonObject getJsonObject() { if (jsonObject == null) { BufferedReader br = new BufferedReader( new InputStreamReader(ZipcodeComponent.class .getClassLoader().getResourceAsStream( ZipcodeComponent.ZIPCODE_FILE))); jsonObject = new Gson().fromJson(br, JsonObject.class); try { br.close(); } catch (IOException e) { e.printStackTrace(); } } return jsonObject; } /** * Get city name * @return List&lt;string&gt; citys */ public String[] listCities() { JsonArray jsonArray = getJsonObject().getAsJsonArray(&quot;city&quot;); String[] cities = new String[jsonArray.size()]; int i; for (i=0; i&lt;jsonarray.size i cities jsonarray.get return zipcode util package com.zipcode_util import junit.framework.test junit.framework.testcase junit.framework.testsuite unit test for simple app.
            </article>
			<div class="read-more-link">
				<a href="/post/android/android_zipcode_library_of_maven/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/php/phalconshou_fa/">Phalcon首發</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>28</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Aug</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	用了好一陣子的YII framework一開始用的時候覺得。哇~好專業阿。好難懂他的整個框架，摸了一陣子之後。才發現，近年不管哪一個程式語言。都是這樣的Design pattern。MVC、ORM，建立一個網站越來越便利也更簡單了。而最近發現一個類似YII的加強版Phalcon。主要他是用C 寫的，所以效能會比一般的framework還要好，但實際上我並沒有測試過，這只是我看官網上的介紹，而且我用framework，其實並不是那麼著墨在校能，而是提供的工具是否好用，開發上是否便利。如此而已。 下載Phalcon 官網有提供Phalcon framework的Github可以下載 $ git clone git://github.com/phalcon/cphalcon.git $ cd cphalcon/build $ ./install 安裝畫面 安裝便利的Phalcon Developer Tools Phalcon一樣有提供Phalcon Developer Tools的Github下載 $ git clone https://github.com/phalcon/phalcon-devtools.git $ cd phalcon-devtools $ ./phalcon.sh 建立softlink $ ln -s /home/phalcon/phalcon-devtools/phalcon.php /usr/bin/phalcon $ chmod ugo+x /usr/bin/phalcon 安裝完畢後重新登入執行測試 $ phalcon commands 執行畫面 建立專案 使用指令建立一個專案 $ phalcon create-project phalcon 這樣就完成了。在我的小專案中也有用到這個framework。
            </article>
			<div class="read-more-link">
				<a href="/post/php/phalconshou_fa/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/ide/netbeans_consolezhong_wen_luan_ma_jie_jue_fang_fa/">Netbeans console中文亂碼解決方法</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>26</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Aug</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	以我為範例我是安裝在 C:\Program Files (x86)\NetBeans 7.3.1 打開 C:\Program Files (x86)\NetBeans 7.3.1\etc\netbeans.conf 編輯其中的這一行： netbeans_default_options=&ldquo;-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-XX:MaxPermSize=200m -J-Xverify:none -J-Dapple.laf.useScreenMenuBar=true -J-Dfile.encoding=utf8 &ndash;fontsize 12&rdquo; 加入粗體的部分，然後重新啟動Netbeans。
            </article>
			<div class="read-more-link">
				<a href="/post/ide/netbeans_consolezhong_wen_luan_ma_jie_jue_fang_fa/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/ruby_on_rails/install_rmagick_on_the_windows_of_ruby_on_rails/">Install rmagick on the Windows of Ruby on Rails</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>12</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Aug</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	Windows上不管是要安裝什麼Ruby的套件總是能出錯，這次就連很常見的ImageMagick還是會無法順利安裝，無言阿!!所以才會有人建議為了自己好，千萬不要在Windows上學習開發Ruby on Rails，但是我是個窮鬼&hellip;買不起Mac只好硬是找方法。以下就是Ruby on Rails安裝rmagick的過程囉。 到ImageMagick官網下載 ImageMagick-6.8.6-7-Q16-x86-static.exe ImageMagick-6.8.6-7-Q16-x86-dll.exe 這兩個皆安裝在C:\ImageMagick，用預設選項安裝即可 點選官網上的download&gt;United States&gt;http://www.imagemagick.org/download&gt;ImageMagick-6.8.6-7.tar.gz 下載、解壓縮後放置在C:\ImageMagick資料夾中，命名為SourceCode 到http://www.mingw.org/ 點選Navigation&gt;download 下載Looking for the latest version? Download mingw-get-inst-20120426.exe (662.7 kB) 將MinGW安裝在C:\MinGW，並且勾選MinGW Developer ToolKit，安裝完畢還要在系統的環境變數加上C:\MinGW 最後用gem安裝rmagick $ gem install rmagick --platform=ruby -- --with-opt-lib=C:/ImageMagick --with-opt-include=c:/ImageMagick/SourceCode Gemfile setup gem 'rmagick' gem &quot;carrierwave&quot; 國外的完整教學影片
            </article>
			<div class="read-more-link">
				<a href="/post/ruby_on_rails/install_rmagick_on_the_windows_of_ruby_on_rails/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/os/linux/apacheyu_tomcat_de_jie_he/">Apache與Tomcat的結合</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>2</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Aug</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	因為我很愛東搞西搞，去年寫了個網站，但是是用JSP寫的，用了Status, Hibernate, tiles的框架，所以得佈署在Tomcat，可是80 port已經被Apache佔用了，Tomcat只能用8080，但看了我實在很不舒服，所以又開始想東想西了。 一開始，我想為Tomcat裝Plugin看能不能融入Apache，讓Apache呼叫Tomcat來執行程式。所以我找到了mod_js試著安裝之後，我失敗了(其實是偷懶!!)，後來有人跟我提到php-java-bridge，但是還沒裝我就放棄了，因為我覺得根本不用這麼複雜&hellip; Google到爛掉我終於找到一個太符合我這個懶人的方式了..非常簡單到爆掉! mod_proxy是我的救星。官網所寫的，必須開放Apache的以下模組 mod_proxy mod_proxy_http mod_proxy_ftp mod_proxy_ajp mod_proxy_balancer 然後在http.conf加入設定(我的是httpd-vhosts.conf) $ vim /etc/httpd/conf.d/httpd-vhosts.conf &lt;virtualhost&gt; ServerName school.ocomm.com.tw ProxyPass / http://school.ocomm.com.tw:8080/ ProxyPassReverse / http://school.ocomm.com.tw:8080/ &lt;/virtualhost&gt; 然後 $ service httpd restart 完成&hellip;.用到現在沒甚麼問題，等有問題再說吧!! 哈&hellip; 簡單到爆炸阿&hellip;.我的網站http://school.ocomm.com.tw，8080不見了，看了都覺得開心。
            </article>
			<div class="read-more-link">
				<a href="/post/os/linux/apacheyu_tomcat_de_jie_he/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/hadoop/shi_yong_sqoop_jiang_mysql_zi_liao_hui_ru_hbase/">使用Sqoop將MySQL資料匯入Hbase</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>18</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jul</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	想要使用MapReduce運算Hbase的資料，但若是原本資料在別種資料庫該怎麼辦呢，在龐大的Hadoop家族中Sqoop就是完成這一個任務，他有提供各種資料庫匯入至Hbase的功能。 因為我慣用MySQL所以還是拿MySQL當作範例，因為我是蠻久之前試玩的，所以是用舊的版本。他的安裝非常方便!! 安裝Sqoop $ cd /opt $ wget 'https://github.com/downloads/cloudera/sqoop/sqoop-1.2.0.tar.gz' 或是到官網下載 $ tar zxvf sqoop-1.2.0.tar.gz $ mv sqoop-1.2.0 sqoop 下載mysql-connector-java-5.1.15-bin.jar並複製到/opt/sqoop/lib，然後就完成囉!! 接下來就測試看看是否能正常運作。 測試Sqoop 列出資料表 $ /opt/sqoop/bin/sqoop list-tables --connect jdbc:mysql://127.0.0.1/test -P --username test 匯入資料表 $ /opt/sqoop/bin/sqoop import --connect jdbc:mysql://127.0.0.1/test --username test --table table_name --hive-import 匯入資料表時下WHERE $ /opt/sqoop/bin/sqoop import --connect jdbc:mysql://127.0.0.1/test --username test --table table_name --hive-import --query 'SELECT * FROM `table_name` where flow_no &gt; 1 AND flow_no 但是我測試過後...無法轉換換行阿..看官網是說sqoop 1.3才有支援，但是hadoop 0.20 並不支援sqoop 1.3一整個無言。改天再測試。 使用Sqoop有出現錯誤也可以顯示 $ /opt/sqoop/bin/sqoop import --connect jdbc:mysql://127.0.0.1/test --username test --table table_name --hive-import --verbose Demo 因為操作Sqoop是有點煩瑣的，所以我自己用PHP寫了Mysql匯入Hbase的簡單操作界面。 發生錯誤 無法從mysql匯入hbase 11/11/11 12:07:59 ERROR tool.ImportTool: Encountered IOException running import job: org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory table_name already exists 可以試試看刪除Hbase資料表 /opt/hadoop/bin/hadoop fs -rmr table_name 非單機模式下，必須寫成MySQL位址，不能用localhost --connect jdbc:mysql://mysqlserver_IP/databaseName 沒有資料庫的權限會發生下面的錯誤 11/11/11 23:22:13 INFO mapred.JobClient: Task Id : attempt_201111112316_0001_m_000004_0, Status : FAILED java.io.IOException: SQLException in nextKeyValue at com.cloudera.sqoop.mapreduce.db.DBRecordReader.nextKeyValue(DBRecordReader.java:238) at org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:423) at org.apache.hadoop.mapreduce.MapContext.nextKeyValue(MapContext.java:67) at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:143) at com.cloudera.sqoop.mapreduce.AutoProgressMapper.run(AutoProgressMapper.java:187) at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:621) at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305) at org.apache.hadoop.mapred.Child.main(Child.java:170) Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'test.tbl_skw_buyer' doesn't exist at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) at java.lang.reflect.Constructor.newInstance(Constructor.java:513) at com.mysql.jdbc.Util.handleNewInstance(Util.java:407) at com.mysql.jdbc.Util.getInstance(Util.java:382) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3603) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3535) at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1989) at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2150) at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2626) at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2119) at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2281) at com.cloudera.sqoop.mapreduce.db.MySQLDataDrivenDBRecordReader.executeQuery(MySQLDataDrivenDBRecordReader.java:50) at com.cloudera.sqoop.mapreduce.db.DBRecordReader.nextKeyValue(DBRecordReader.java:225) ...
            </article>
			<div class="read-more-link">
				<a href="/post/hadoop/shi_yong_sqoop_jiang_mysql_zi_liao_hui_ru_hbase/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/php/phpan_zhuang_json/">PHP安裝JSON</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>17</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jul</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	JSON是一種資料格式，很多語言為了能互相溝通，都採用這種格式來傳遞資料，要讓PHP支援JSON，需要另外安裝模組。 下載原始檔案包 $ cd /tmp $ wget 'http://www.aurore.net/projects/php-json/php-json-ext-1.2.0.tar.bz2' 解壓縮 $ tar xvjf php-json-ext-1.2.0.tar.bz2 初始化PHP環境 $ cd php-json-ext-1.2.0 $ phpize 若出現錯誤表示沒有安裝過phpize phpize commend not found 這個可以在yum中安裝 $ yum -y install php-devel 如果還不行，說明你的編譯工具有問題，安裝一下就可以了 $ yum -y install gcc install autoconf automake libtool 再次測試運行phpize並重新安裝 $ ./configure $ make &amp;&amp; makeinstall 檢查JSON是否安裝成功 $ find / -name ‘*json.so’ ./usr/lib/php/modules/json.so 有出現路徑代表安裝成功 修改php.ini 我的是在php.ini中include一個資料夾/etc/php.d 在這個檔中添一個json.ini $ vim json.ini extension=json.so 重啟服務 $ service httpd restart 檢查JSON模組是否有載入 $ php -r &quot;phpinfo();&quot; | grep 'json' $ json $ json support =&gt; enabled $ json version =&gt; 1.2.1 這樣就完成囉!!!
            </article>
			<div class="read-more-link">
				<a href="/post/php/phpan_zhuang_json/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/javascript/centos_an_zhuang_node__js_0__8__5/">CentOS 安装 Node.js 0.8.5</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>10</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jul</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	很久很久以前，開發過社交網站，當時以Facebook與Plurk當作目標(瘋了)，但是最後還是以失敗收場。 那時候研究過Facebook與Plurk的留言機制，一直苦無方案可以解決&rdquo;即時&rdquo;的問題&hellip;也猜不透他們到底是怎麼做到的，一定有人說明明就很多方法，但那是四年前吶&hellip; 當時還試圖用Ajax來解決，發現!!可以耶。開心之餘的測試下。第二個人再來請求就死翹翹了&hellip;因為用timer會使的請求網頁一直處於等待回應的狀態。 於是呢&hellip;又重頭來開始找方法，最後皇天不負苦心人(已經快要爆肝)發現了Node.js它有worker的機制，當時他還在0.2.2的版本呢!有夠古老。所以現在來回味一下!! 安装Node.js前置作業 Node.js 0.8.5的安裝，需要python 2.7，大部分安装失敗，都是因為python版本過低。 $ python -V Python 2.4.3 Node.js 0.8.5依賴的library $ yum install -y bzip2* 開始安裝python $ wget http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tgz $ tar zvxf Python-2.7.3.tgz $ cd Python-2.7.3 $ ./configure $ make &amp;&amp; make install 因為系統預設是指向2.4.3，所以要重新建立連接，但是yum是在python 2.4.3才可以正常使用，所以不要隨便移除。 $ mv /usr/bin/python /usr/bin/python.bak $ ln -s /usr/local/bin/python2.7 /usr/bin/python 檢查python指向是否成功 $ python -V Python 2.7.3 安裝Node.js 可以到官網選擇合適的版本下載也可以用github上的版本。 $ wget 'http://nodejs.org/dist/v0.8.5/node-v0.8.5.tar.gz' $ tar zvxf node-v0.8.5.tar.gz $ cd node-v0.8.5./configure $ make &amp;&amp;
            </article>
			<div class="read-more-link">
				<a href="/post/javascript/centos_an_zhuang_node__js_0__8__5/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/php/guan_li_php_library_de_li_qi_composer/">管理PHP Library的利器Composer</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>4</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jul</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	在之前試玩Ruby On Rails的時候就覺得有Gem一整個就是超好用的吶!!所以前陣子公司導入Gitlab之後順勢要我研究一下PHP的Composer，想不到還有支援Github。所以做個紀錄。 安裝PHP Composer 安裝在各自專案時 $ mkdir /var/www/html/example $ sudo curl -s https://getcomposer.org/installer | sudo php 我安裝時有出現警告訊息是因為我的PHP版本是5.3.3他建議我升級到5.3.4或更高，否則可能導致Composer不穩定 我自己是安裝在/usr/local/bin $ cd /usr/local/bin $ sudo curl -s https://getcomposer.org/installer | sudo php 可建立指向 $ ln -s /usr/local/bin/composer.phar /usr/bin/composer 這樣不管在哪個專案只要建立composer.json都可以使用了。 在PHP專案建立Composer 建立composer.json $ cd /var/www/html/example $ vim composer.json { &quot;require&quot;: { &quot;monolog/monolog&quot;: &quot;1.2.*&quot; } } 建立後執行 $ composer install 專案目錄底下就會產生vendor資料夾，裏頭就是在composer.json有設定要引入的library。 Composer官網也有提供線上的Library可以使用。讚!! 使用Github上的Repository 把library放到github上管理，然後再用composer引入各自的專案，這豈不是太方便了!! $ vim composer.json { &quot;name&quot;: &quot;bom-solution&quot;, &quot;description&quot;: &quot;bom solution&quot;, &quot;homepage&quot;: &quot;https://github.com/alanmoment/bom-solution&quot;, &quot;repositories&quot;: [{ &quot;type&quot;: &quot;package&quot;, &quot;package&quot;: { &quot;name&quot;: &quot;alanmoment/bom-solution&quot;, &quot;version&quot;: &quot;v0.1&quot;, &quot;source&quot;: { &quot;url&quot;: &quot;git@github.com:alanmoment/bom-solution.git&quot;, &quot;type&quot;: &quot;git&quot;, &quot;reference&quot;: &quot;v0.1&quot; } } }], &quot;require&quot;: { &quot;php&quot;: &quot;&gt;=5.3.3&quot;, &quot;alanmoment/bom-solution&quot;: &quot;v0.1&quot; } } 建立github的composer之前必須先在你的repository建立tag alanmoment是我的github的帳號 bom-solution是我的repository v0.1是我tag的版號 存檔後執行 $ composer install 會發生以下錯誤 Loading composer repositories with package information Installing dependencies (including require-dev) from lock file Nothing to install or update Generating autoload files 這是因為執行過composer install之後目錄底下也會產生一隻composer.lock檔案，要再次執行前先把他刪掉，就可以正常執行囉 。 完成囉!!
            </article>
			<div class="read-more-link">
				<a href="/post/php/guan_li_php_library_de_li_qi_composer/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/cooperation/gitlab/jian_zhi_zhuan_shu_zi_ji_de_github_zhi_gitlab/">建置專屬自己的Github之Gitlab</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>28</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>2 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	Github用久了就覺得這一切真是太方便了!!但是呢，有些程式碼就是不太方便放在別人那邊，不管自己寫的code是不是有到那種程度，人就是想把屬於自己的東西留給自己欣賞，這個時候Gitlab就是你的救星啦!!! 安裝Rvm Ruby $ curl -L https://get.rvm.io | bash -s stable --ruby $ rvm install 1.9.3 $ rvm use 1.9.3 $ rvm rubygems latest 下載並安裝git-core $ cd /tmp $ wget 'https://git-core.googlecode.com/files/git-1.7.11.tar.gz' $ tar zxvf git-1.7.11.tar.gz $ cd git-1.7.11 $ ./configure $ make $ make install 安裝Gitlab所需套件 $ yum install openssl openssl-devel zlib zlib-devel mysql mysql-devel sqlite sqlite-devel libicu-devel $ wget 'http://peak.telecommunity.com/dist/ez_setup.py' $ python ez_setup.py $ easy_install pip $ pip install pygments 安裝Redis 我自己覺得Redis有點像Memcache，底層的實作我就不太清楚。 $ wget 'http://redis.googlecode.com/files/redis-2.4.15.tar.gz' $ tar xzf redis-2.4.5.tar.gz $ cd redis-2.4.5 $ make $ make install $ cd utils $ ./install_server.sh $ mkdir /etc/redis /var/lib/redis $ cp src/redis-server src/redis-cli /usr/local/bin/ $ cp redis.conf /etc/redis/ 將設定值修改如下： $ vim /etc/redis/redis.conf daemonize yes bind 127.0.0.1 /home/git/.profile' $ sudo -u git -i -H /home/git/gitolite/src/gl-system-install $ cp /home/gitlab/.ssh/id_rsa.pub /home/git/gitlab.pub $ chmod 777 /home/git/gitlab.pub $ sudo -u git -H sed -i 's/0077/0007/g' /home/git/share/gitolite/conf/example.gitolite.rc $ sudo -u git -H sh -c &quot;PATH=/home/git/bin:$PATH; gl-setup -q /home/git/gitlab.pub&quot; 修改資料夾權限及擁有者 $ chmod -R g+rwX /home/git/repositories/ $ chown -R git:git /home/git/repositories/ 測試Gitlab是否可以正常下載Gitolite管理檔案庫 $ su - gitlab $ git clone git@localhost:gitolite-admin.git /tmp/gitolite-admin $ rm -rf /tmp/gitolite-admin $ exit 設定Gitlab $ gem install charlock_holmes $ gem install bundler $ bundle install $ su - gitlab $ git clone http://github.com/gitlabhq/gitlabhq.git gitlab $ cd gitlab 使用MySQL，複製設定檔，修改資料庫登入帳號及密碼 $ cp config/database.yml.mysql config/database.yml 修改gitlab.yml $ cp config/gitlab.yml.example config/gitlab.yml $ vim config/gitlab.yml ## GitLab settings gitlab: ## Web server settings #host: localhost host: git.ocomm.com.tw 這個步驟當時搞好久，結果是要自己先建立資料庫...
            </article>
			<div class="read-more-link">
				<a href="/post/cooperation/gitlab/jian_zhi_zhuan_shu_zi_ji_de_github_zhi_gitlab/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/hadoop/shi_yong_mapreduce_zhi_ti_dai_fang_an_hive/">使用MapReduce之替代方案Hive</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>23</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>4 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	若要操作Hadoop就必須要會MapReduce，很好!!在Hadoop很夯之前相信很多人都對MapReduce非常陌生，沒錯!!那真的是有點困難，但是呢，若我講SQL語言，相信你一定信心十足吧!! 因此囉，Facebook當初也了這個問題傷透了腦筋，因為要找一個熟悉MapReduce的工程師比找一個會SQL語法的工程師還困難的情況底下，他們想出了應變之道，那就是用極接近SQL語言的方式去操作MapReduce，因為找到會SQL語言的人較容易。 所以Hive就是為此誕生的，這是Facebook一個部門的研發成果，後來為了讓更多人可以應用，他們將其釋出提供給Apache當作開源項目，讓Hive開始發揚光大，更多的介紹官網都有唷。 若你看不順眼Hive，你也可以選擇其他的諸如PIG(我不是在罵人&hellip;真的叫PIG)，或是你真的想挑戰MapReduce當然也可以，任君挑選。因為我喜歡Hive的Logo所以囉，我就選他了。 建立Hive 從官網下載或是 $ cd /opt $ wget 'http://ftp.stut.edu.tw/var/ftp/pub/OpenSource/apache//hive/hive-0.7.1/hive-0.7.1.tar.gz' $ mv hive-0.7.1 /opt/hive 安裝ivy $ cd /tmp $ wget 'http://www.apache.org/dist/ant/ivy/2.3.0/apache-ivy-2.3.0-bin-with-deps.tar.gz' $ tar zxvf apache-ivy-2.3.0-bin-with-deps.tar.gz $ mv apache-ivy-2.3.0 /usr/local $ ln -s apache-ivy-2.3.0 ivy 配置環境 $ vim ~/.bashrc export HIVE_HOME=/opt/hive export IVY_HOME=/usr/local/ivy export PATH=$HIVE_HOME/bin export HIVE_HOME 修改hive-default.xml 多個Hive節點的數據内容保存在HDFS上，通過配置文件，指向NameNode節點即可，例如： $ vim /opt/hive/conf/hive-default.xml &lt;property&gt;&lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;&lt;value&gt;hdfs://master:9000/user/hive/warehouse&lt;/value&gt;/user/hive/warehouse –&gt; &lt;description&gt;Master of default database for the warehouse&lt;/description&gt;&lt;/property&gt; 使用Hive的三種Metastore儲存方式 使用Derby資料庫儲存數據 使用本機的MySQL 使用遠端的MySQL 我自己熟悉的是MySQL當然就選他囉!! $ vim /opt/hive/conf/hive-site.xml &lt;configuration&gt;&lt;property&gt;&lt;name&gt;hive.metastore.local&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;&lt;value&gt;jdbc:mysql://localhost:3306/hive?useUnicode=true&amp;characterEncoding=UTF-8&lt;/value&gt;&lt;description&gt;JDBC connect string for a JDBC metastore&lt;/description&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;&lt;description&gt;Driver class name for a JDBC metastore&lt;/description&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;&lt;value&gt;資料庫account&lt;/value&gt;&lt;description&gt;username to use against metastore database&lt;/description&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;&lt;value&gt;資料庫password&lt;/value&gt;&lt;description&gt;password to use against metastore database&lt;/description&gt;&lt;/property&gt;&lt;/configuration&gt; $ vim /opt/hive/conf/jpox.properties javax.jdo.PersistenceManagerFactoryClass=org.jpox.PersistenceManagerFactoryImpl org.jpox.autoCreateSchema=false org.jpox.validateTables=false org.jpox.validateColumns=false org.jpox.validateConstraints=false org.jpox.storeManagerType=rdbms org.jpox.autoCreateSchema=true org.jpox.autoStartMechanismMode=checked org.jpox.transactionIsolation=read_committed javax.jdo.option.DetachAllOnCommit=true javax.jdo.option.NontransactionalRead=true javax.jdo.option.ConnectionDriverName=org.apache.derby.jdbc.ClientDriver javax.jdo.option.ConnectionURL=jdbc:derby://localhost:1527/metastore_db;create=true javax.jdo.option.ConnectionUserName=APP javax.jdo.option.ConnectionPassword=mine org.jpox.cache.level2=true org.jpox.cache.level2.type=SOFT 有一個需要注意的地方是，需要把一個jar包mysql-connector-java-5.1.15-bin.jar複製到hive的lib目錄下才行，否則執行語句的時候會出錯，範例如下： hive&gt; show tables; FAILED: Error in metadata: javax.jdo.JDOFatalInternalException: Error creating transactional connection factory NestedThrowables: java.lang.reflect.InvocationTargetException FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask 我當時安装MYSQL的时候是使用RPM来安装的，没找到mysql-connector-java-5.1.15-bin.jar。 在MySQL建立Hive資料庫並且設定語系 character_set_server = latin1 collation_server = latin1_swedish_ci default_character_set = latin1 讓Thrift使用Hive 修改/opt/hive/src/metastore/if/hive_metastore.thrift第6行，依實際路徑修改 include &quot;/opt/thrift/contrib/fb303/if/fb303.thrift&quot; 開始產生Thrift使用的Hive程式碼 $ mkdir /opt/thrift/packages/ $ cd /opt/thrift/packages/ Generate code並將目錄搬至packages $ thrift --gen php /opt/thrift/contrib/fb303/if/fb303.thrift $ cp -r gen-php/fb303 ./fb303 $ thrift --gen php -I include /opt/hive/src/metastore/if/hive_metastore.thrift $ cp -r gen-php/hive_metastore ./hive_metastore $ thrift --gen php -I include /opt/hive/src/service/if/hive_service.thrift $ cp -r gen-php/hive_service ./hive_service $ thrift --gen php -I include /opt/hive/src/ql/if/queryplan.thrift $ cp -r gen-php/queryplan ./queryplan 修改/opt/hive/src/metastore/if/hive_metastore.thrift第27行，依實際路徑修改 include &quot;/opt/hive/src/metastore/if/hive_metastore.thrift&quot; include &quot;/opt/hive/src/ql/if/queryplan.thrift&quot; 新增hive-thrift執行檔 $ vim /etc/init.d/hive-thrift #!/bin/bash # init script for Hive Thrift Interface.
            </article>
			<div class="read-more-link">
				<a href="/post/hadoop/shi_yong_mapreduce_zhi_ti_dai_fang_an_hive/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/hadoop/hadoop_gou_tong_qiao_liang_zhi_thrift_0__7/">Hadoop 溝通橋梁之 Thrift 0.7</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>18</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	會建置Thrift是因為我希望用PHP向Hadoop + Hbase 叢集環境溝通。Thrift是全世界第一大國Facebook釋出的開源項目之一，主要用來串接不同語言，讓他們之間能互相溝通。 這裡我就是用來讓PHP也能使用MapReduce和Hbase溝通的。在安裝的時候吃了不少苦頭阿&hellip;腦細胞死了不少。就算現在再架設一遍，我相信會再痛苦一次的。 檢查並安裝依賴的函式庫 $ yum search libboost libboost c++的函式庫 $ yum search yacc $ yum search flex make時會用到 $ yum search autoconf $ yum search automake automake 1.9以上actomake必須安裝2.6以上版本否則Compiler出錯。如果没有可自行編譯安装 $ yum search libtool $ yum search flex $ yum search bison $ yum search g++ $ yum search gcc-c++ $ yum search python-devel $ yum search libevent-devel $ yum search zlib-devel $ yum search ruby-devel $ yum install
            </article>
			<div class="read-more-link">
				<a href="/post/hadoop/hadoop_gou_tong_qiao_liang_zhi_thrift_0__7/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/hadoop/hadoop_&#43;_hbase_cong_ji_huan_jing/">Hadoop &#43; Hbase 叢集環境</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>17</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	這是配合著CentOS 5.5 + Hadoop 0.20以及CentOS 5.5 + Hbase 0.94.8建立的叢集系統，為了方便記錄，所以我分開介紹囉。但記錄畢竟有點久了，有些步驟還需要再架一次才會更正確。 因為Hadoop本身的優勢將文件的儲存和任務處理分散化，Hadoop分散式架構中有兩種負責不同功能的服務器Master服務器和Slave服務器，安裝時假設要為2台服務器安裝Hadoop架構。 本篇環境介紹 安裝了Java 1.6.x,或以後的版本 兩台服務器名稱為master和slave 兩台服務器操作系統均為centos5.*且版本大於等於5.4 master將作為master主服務器使用，slave將作為slave服務器使用: master和slave的wget命令均可正常使用 master和slave均正常運行且可正確聯繫 master和slave空間足夠 master和slave均已獲取root權限 master的ip位址為192.168.1.28，slave的ip位址為192.168.1.29 設置環境變數 設置hosts在Master和slave的/etc/hosts下共同增加 $ vim /etc/hosts 192.168.1.28 master 192.168.1.29 slave 修改master的hostname文件 $ vim /etc/hostname master 修改slave的hostname文件 $ vim /etc/hostname slave 免密碼登入遠端電腦 請參考SSH免密碼登入遠端電腦 重新配置Hadoop 配置core-site.xml，在節點下添加 $ vim /opt/hadoop/conf/core-site.xml &lt;property&gt;&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;&lt;value&gt;/home/hadoop-${user.name}&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;fs.default.name&lt;/name&gt;&lt;value&gt;hdfs://master:9000&lt;/value&gt;&lt;/property&gt; 配置mapred-site.xml，在節點下添加 $ vim /opt/hadoop/conf/mapred-site.xml &lt;property&gt;&lt;name&gt;mapred.job.tracker&lt;/name&gt;&lt;value&gt;master:9001&lt;/value&gt;&lt;/property&gt; 修改master文件 $ vim /opt/hadoop/conf/master master 修改slaves $ vim /opt/hadoop/conf/slaves slave 修改内容，注意不是添加是更改 重新配置Hbase 配置hbase-env.sh $ vim /opt/hbase/conf/hbase-env.sh export JAVA_HOME=/usr/lib/jvm/java-6-sun export HADOOP_CONF_DIR=/opt/hadoop/conf export HBASE_HOME=/opt/hbase export HBASE_LOG_DIR=/var/hadoop/hbase-logs export HBASE_PID_DIR=/var/hadoop/hbase-pids export HBASE_MANAGES_ZK=true export HBASE_CLASSPATH=$HBASE_CLASSPATH:/opt/hadoop/conf 配置hbase-site.xml，在節點下添加 $ vim /opt/hbase/conf/hbase-site.xml &lt;configuration&gt;&lt;property&gt;&lt;name&gt;hbase.rootdir&lt;/name&gt;&lt;value&gt;hdfs://master:9000/hbase&lt;/value&gt;&lt;description&gt;The directory shared by region servers.
            </article>
			<div class="read-more-link">
				<a href="/post/hadoop/hadoop_&#43;_hbase_cong_ji_huan_jing/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/os/linux/sshmian_mi_ma_deng_ru_yuan_duan_dian_nao/">SSH免密碼登入遠端電腦</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>16</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	YUM安裝SSH $ yum -y install openssh 用ssh-keygen做出公用和私有鑰匙，並且設置無密碼連接，把master的id_rsa.pub傳給slave $ ssh-keygen -t rsa -C root Generating public/private dsa key pair. Enter file in which to save the key (/home/root/.ssh/id_rsa): Enter passphrase (empty for no passphrase): &gt; /root/.ssh/authorized_keys $ exit 再登入一次slave $ ssh 192.168.1.29 已經不用再輸入密碼囉，這樣就完成了。 2014/1/15 9:37 pm 將id_dsa修正為id_rsa
            </article>
			<div class="read-more-link">
				<a href="/post/os/linux/sshmian_mi_ma_deng_ru_yuan_duan_dian_nao/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/hadoop/centos_55_&#43;_hbase_0948/">CentOS 5.5 &#43; Hbase 0.94.8</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>15</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>1 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	本篇與CentOS 5.5 + Hadoop 0.20其實是同一時期的，Hbase有別於RDBMS資料庫，底層是使用了分散式的檔案系統(Hadoop HDFS)，他把不同的表拆成很多份，由不同的伺服器各自負責存取部分的資料，藉由這樣達到分散式架構，提高效能。詳細功能官網都有說明喔! 本篇預設環境： 已經安裝了Java 1.6.x,或以後的版本 hosts改為slave 建立Hbase 一樣為Hbase找個家吧，從官網下載下來。 $ cd /opt $ wget 'http://apache.cdpa.nsysu.edu.tw/hbase/stable/hbase-0.94.8.tar.gz' $ mv hbase-0.94.8 hbase $ mkdir -p /usr/local/hbase $ chown -R $USER:$USER /opt/hbase 進入conf配置hbse-env.sh $ vim /opt/hbase/conf/hbase-env.sh export HBASE_HOME=/opt/hbase export JAVA_HOME=/usr/java/jdk1.x.x_xx export HBASE_MANAGES_ZK=true #用Hbase的zookeeper 進入conf配置regionservers替换其中内容 $ vim /opt/hbase/conf/regionservers slave 進入conf配置hbase-site.xml $ vim /opt/hbase/conf/hbase-site.xml &lt;configuration&gt;&lt;property&gt;&lt;name&gt;hbase.rootdir&lt;/name&gt;&lt;value&gt;hdfs://slave:9000/hbase&lt;/value&gt;&lt;description&gt;The directory shared by region servers.&lt;/description&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hbase.tmp.dir&lt;/name&gt;&lt;value&gt;/var/hadoop/hbase-${user.name}&lt;/value&gt;&lt;description&gt;Temporary directory on the local filesystem.&lt;/description&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hbase.cluster.distributed&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;description&gt;The mode the cluster will be in. Possible values are false: standalone and pseudo-distributed setups with managed Zookeeper true: fully-distributed with unmanaged Zookeeper Quorum (see hbase-env.sh)&lt;/description&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hbase.zookeeper.property.clientPort&lt;/name&gt;&lt;value&gt;2222&lt;/value&gt;&lt;description&gt;Property from ZooKeeper's config zoo.cfg.&lt;/description&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;&lt;value&gt;slave&lt;/value&gt;&lt;description&gt;Comma separated list of servers in the ZooKeeper Quorum.&lt;/description&gt;&lt;/property&gt;&lt;/configuration&gt; 這樣就配置完成了，接下來就啟動Hbase吧 $ /opt/hbase/bin/start-hbase.sh root@localhost's password: localhost: starting zookeeper, logging to /usr/local/hbase/bin/../logs/hbase-root-zookeeper-localhost.localdomain.out starting master, logging to /usr/local/hbase/logs/hbase-root- ...以下省略 檢查啟動狀況 $ ps aux | grep hbase root 24578 3.0 2.7 1191892 28504 ?
            </article>
			<div class="read-more-link">
				<a href="/post/hadoop/centos_55_&#43;_hbase_0948/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/hadoop/centos_55_&#43;_hadoop_020/">CentOS 5.5 &#43; Hadoop 0.20</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>13</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>2 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	緊接著再來一發舊的，這一篇已經是去年的記錄了，當時是因為公司想要導入Hadoop分析使用者行為，所以我才開始著手研究，就趁這個時候把他整理一下吧，現在的版本都已經不知道升到多少去了。 建立Hadoop基本環境 下載Java JDK並開始安裝，設置Java使用環境必須要1.6以上，並且重新載入。 $ ./jdk-7u21-linux-i586.rpm find / -name java /usr/java/jdk1.x.x-xx $ ln -s /usr/java/jdk1.x.x-xx /usr/java/jdk $ vim ~/.bashrc export JAVA_HOME=/usr/java/jdk export CLASSPATH=$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH:$HOME/bin export HADOOP_HOME=/opt/hadoop $ source ~/.bashrc 建立hadoop帳號，設定SSH，切換為 hadoop 身分，或直接使用root $ yum -y install openssh $ su hadoop $ passwd hadoop $ ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa Generating public/private dsa key pair. Enter file in which to save the key (/home/ hadoop/.ssh/id_dsa): Enter passphrase (empty for no passphrase): &gt; ~/.ssh/authorized_keys $ chmod 600 .ssh/authorized_keys $ ssh hadoop@localhost 找一個讓Hadoop安身立命的好地方，這邊我是放在opt底下，下載後解壓縮 $ cd /opt $ wget 'http://apache.ntu.edu.tw/hadoop/core/hadoop-0.20.2/hadoop-0.20.2.tar.gz' $ tar xzvf hadoop-0.20.2.tar.gz $ mv hadoop-0.20.2 hadoop 設置hadoop-env.sh在文件最末端加上 $ vim /opt/hadoop/conf/hadoop-env.sh export JAVA_HOME=/usr/java/jdk1.x.x-xx 測試一下hadoop可否執行 $ /opt/hadoop/bin/hadoop Usage: hadoop [--config confdir] COMMAND where COMMAND is one of: ...以下省略 測試 Local (Standalone) Mode，此模式下每個 Hadoop daemon 執行在一個分離的 Java 程序中。 $ mkdir /opt/hadoop/input $ cp /opt/hadoop/conf/*.xml input $ bin/hadoop jar hadoop-*-examples.jar grep input output 'dfs[a-z.]+' 10/02/22 10:47:42 INFO jvm.JvmMetrics: Initializing JVM Metrics with processName 以下省略 $ cat /opt/hadoop/output/* 1 dfsadmin 更改config檔 $ vim /opt/hadoop/conf/core-site.xml &lt;configuration&gt;&lt;property&gt;&lt;name&gt;fs.default.name&lt;/name&gt;&lt;value&gt;hdfs://localhost:9000&lt;/value&gt;&lt;/property&gt;&lt;/configuration&gt; $ vim /opt/hadoop/conf/hdfs-site.xml &lt;configuration&gt;&lt;property&gt;&lt;name&gt;dfs.replication&lt;/name&gt;&lt;value&gt;1&lt;/value&gt;&lt;/property&gt;&lt;/configuration&gt; $ vim /opt/hadoop/conf/mapred-site.xml &lt;configuration&gt;&lt;property&gt;&lt;name&gt;mapred.job.tracker&lt;/name&gt;&lt;value&gt;localhost:9001&lt;/value&gt;&lt;/property&gt;&lt;/configuration&gt; 格式化分散式檔案系統 $ /opt/hadoop/bin/hadoop namenode -format 10/02/22 11:02:36 INFO namenode.NameNode: STARTUP_MSG: /************************************************************ ...以下省略 啟動 hadoop daemons $ /opt/hadoop/bin/start-all.sh namenode running as process 17390.
            </article>
			<div class="read-more-link">
				<a href="/post/hadoop/centos_55_&#43;_hadoop_020/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
          <section  class="post">
            <header class="post-header">
            
            <h1 class="post-title">
              <a href="/post/other/qing_zhu_octopress_kai_zhang/">慶祝Octopress開張</a>
            </h1>
            </header>
            <p class="post-meta">
            	
		          <span class="post-date">
		            <span class="post-date-day"><sup>12</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Jun</span> <span class="post-date-year">2013</span>
		          </span>
      				
      				
      					By <a class="post-author" >Alan</a>
      				
              
                <span class="post-reading-time"><i class="fa fa-clock-o"></i> <em>2 min. read</em></span>
              
      				
      					<div class="post-categories">
				        
      					
					        <a class="post-category post-category-2013" href="http://alanmoment.github.io//categories/2013">2013</a>
      					
      					</div>
      				
            </p>
            <article class="post-summary">
            	搞了老半天終於搞定，來試試看好不好用!!! 立馬來一篇教學文。Github + Octopress 安裝 RVM Installing RVM這邊有非常完整的教學。 建立Octopress 找一個讓程式碼安身的地方，我習慣放在home。(好吧這是來亂的) $ mkdir /home/ruby 接著就是到Github 登入或註冊帳號，並且開一個新的Repositories，以我為範例就是 alanmoment.github.com，然後就是Ctrl+C 、Ctrl+V的快樂時光。 $ rvm install 1.9.2 &amp;&amp; rvm use 1.9.2 $ git clone git://github.com/imathis/octopress.git octopress Initialized empty Git repository in /home/ruby/octopress/.git/ remote: Counting objects: 10296, done. remote: Compressing objects: 100% (4511/4511), done. remote: Total 10296 (delta 5628), reused 9415 (delta 4937) Receiving objects: 100% (10296/10296), 2.28 MiB | 1.01 MiB/s, done. Resolving deltas: 100% (5628/5628), done.
            </article>
			<div class="read-more-link">
				<a href="/post/other/qing_zhu_octopress_kai_zhang/"><span class="read-more-slashes">//</span>Read More...</a>
			</div>
          </section>
        
      </div>

      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>

	<p>&copy; 2016. All rights reserved.</p>
</div>
    </div>
  </div>
  
</body>
</html>
